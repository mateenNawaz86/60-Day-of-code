<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>TODO List</title>
    <!-- Bootstrap -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css"
      integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
      crossorigin="anonymous"
    />

    <!-- fontawsome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.2/css/all.min.css"
      integrity="sha512-1sCRPdkRXhBV2PBLUdRb4tMg1w2YPf37qatUFeS7zlBy7jJI8Lf4VHwWfZZfpXtYSLy85pkm9GaYVYMfw5BC1A=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
  </head>
  <body>
    <div class="container my-5 col-lg-7">
      <h2 class="text-center text-info">TODO LIST</h2>
      <div class="input-group my-5">
        <input
          type="text"
          class="form-control"
          placeholder="Add Items"
          aria-label="Recipient's username"
          aria-describedby="button-addon2"
          id="input"
        />

        <button class="btn btn-outline-success" type="button" id="add_btn">
          Add
        </button>
      </div>

      <ul class="list-group" id="item_list">
        <li class="list-group-item d-flex justify-content-between px-2">
          <h4>Error 404</h4>

          <button class="btn btn-danger mx-2" onclick="removeElement(this)">
            <i class="fa-solid fa-xmark"></i>
          </button>
        </li>
      </ul>
    </div>

    <!-- script start -->
    <script>
      const addBtn = document.getElementById("add_btn");

      const itemList = document.getElementById("item_list");

      const input = document.getElementById("input");

      addBtn.addEventListener("click", (event) => {
        // Remove the emptyMsg from the DOM Manipulation
        if (
          itemList.children[0].className == "emptyMsg" &&
          input.value.trim().length >= 3
        ) {
          itemList.children[0].remove();
        }

        // select current target element
        let curBtn = event.currentTarget;

        // select input value
        let currInput = curBtn.previousElementSibling;

        let inpval = currInput.value;

        // create new element
        let new_li = document.createElement("li");
        // new_li.textContent = inpval;

        new_li.className = "list-group-item d-flex justify-content-between";

        new_li.innerHTML = `<h4 class="flex-grow-1">${inpval}</h4>
                    <button id="remove_btn" class="btn btn-danger mx-2" onclick="removeElement(this)">
                        <i class="fa-solid fa-xmark" ></i>
                    </button>`;

        if (inpval.trim().length >= 3) {
          itemList.appendChild(new_li);
        }

        input.value = "";
      });

      // Remove existing element from the DOM Manipulation
      const removeElement = (event) => {
        event.parentElement.remove();

        if (itemList.children.length <= 0) {
          // create a empty msg
          let emptyMsg = document.createElement("h5");
          emptyMsg.textContent = "No item found!";
          emptyMsg.classList.add("emptyMsg");

          itemList.appendChild(emptyMsg);
        } else {
          return 0;
        }
      };
    </script>
    <!-- script end -->
  </body>
</html>
